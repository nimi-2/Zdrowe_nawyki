<div class="dashboard">
  <div class="top-section">
    <div class="progress-section">
      <div class="widget-title">Postęp Nawyków</div>

      <!-- Kroki (zielony) -->
      <div class="progress-item">
        <div class="progress-label">
          <div class="progress-icon green">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90">
              <path
                d="M 82.73 85.896 H 56.693 c -6.108 0 -11.892 -2.336 -16.286 -6.579 L 4.769 44.908 C 1.717 41.961 0.024 38.003 0 33.762 c -0.023 -4.241 1.625 -8.218 4.643 -11.198 L 20.134 7.269 c 4.255 -4.201 10.974 -4.256 15.296 -0.12 c 0.407 0.389 0.631 0.932 0.617 1.496 c -0.102 4.007 1.246 7.277 3.896 9.458 c 3.563 2.931 9.203 3.81 15.468 2.41 c 1.6 -0.356 3.245 0.028 4.522 1.053 c 1.288 1.032 2.026 2.57 2.026 4.219 v 19.671 c 0 3.866 3.145 7.011 7.011 7.011 h 2.821 C 81.832 52.466 90 60.634 90 70.673 v 7.954 C 90 82.636 86.739 85.896 82.73 85.896 z M 27.844 8.089 c -1.767 0 -3.533 0.676 -4.899 2.025 L 7.454 25.411 C 5.209 27.627 3.982 30.585 4 33.74 c 0.018 3.155 1.277 6.099 3.547 8.29 L 43.186 76.44 c 3.645 3.519 8.441 5.456 13.508 5.456 H 82.73 c 1.803 0 3.27 -1.467 3.27 -3.27 v -7.954 c 0 -7.834 -6.373 -14.207 -14.207 -14.207 h -2.821 c -6.071 0 -11.011 -4.939 -11.011 -11.011 V 25.783 c 0 -0.429 -0.192 -0.829 -0.527 -1.098 c -0.192 -0.154 -0.596 -0.391 -1.15 -0.27 c -7.476 1.669 -14.36 0.493 -18.88 -3.225 c -3.412 -2.807 -5.253 -6.831 -5.356 -11.681 C 30.8 8.563 29.321 8.089 27.844 8.089 z"
                fill="#10b981"
              />
              <path
                d="M 88 72.673 H 57.118 c -3.696 0 -7.198 -1.412 -9.861 -3.977 L 3.581 26.633 c -0.796 -0.766 -0.819 -2.032 -0.053 -2.828 c 0.767 -0.796 2.032 -0.82 2.828 -0.053 l 43.677 42.063 c 1.913 1.843 4.43 2.857 7.086 2.857 H 88 c 1.104 0 2 0.896 2 2 S 89.104 72.673 88 72.673 z"
                fill="#10b981"
              />
            </svg>
          </div>
          <span class="label-text green">Kroki</span>
        </div>
        <div class="progress-value green" id="steps-value">{{ stepsValue }} / {{ stepsGoal }}</div>
        <div class="progress-bar-container">
          <div
            class="progress-bar green"
            id="steps-bar"
            [style.width.%]="currentStepsPercent"
          ></div>
        </div>
      </div>

      <!-- Ogien - kalorie -->
      <div class="progress-item">
        <div class="progress-label">
          <div class="progress-icon orange">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="#f59e0b"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 2c2 4 6 6 6 11a6 6 0 1 1-12 0c0-3 2-5 4-7" />
              <path d="M12 12c1 2 3 3 3 5a3 3 0 1 1-6 0c0-1 1-2 2-3" />
            </svg>
          </div>
          <span class="label-text orange">Spalone kalorie</span>
        </div>
        <div class="progress-value orange" id="calories-value">
          {{ caloriesValue }}kcal / {{ caloriesGoal }}kcal
        </div>
        <div class="progress-bar-container">
          <div
            class="progress-bar orange"
            id="calories-bar"
            [style.width.%]="currentCaloriesPercent"
          ></div>
        </div>
      </div>

      <!-- Ksiezyc - glebokosc snu -->
      <div class="progress-item">
        <div class="progress-label">
          <div class="progress-icon purple">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="#8b5cf6"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
            </svg>
          </div>
          <span class="label-text purple">Czas snu</span>
        </div>
        <div class="progress-value purple" id="time-value">
          {{ getSleepHours() }}h / {{ sleepGoal / 60 }}h
        </div>
        <div class="progress-bar-container">
          <div
            class="progress-bar purple"
            id="time-bar"
            [style.width.%]="currentSleepPercent"
          ></div>
        </div>
      </div>
    </div>

    <!-- Kalendarz -->
    <div class="calendar-widget">
      <div class="calendar-header">
        <div class="month-nav">
          <button class="nav-btn" (click)="previousMonth()">‹</button>
          <span class="current-month">
            {{ currentMonth }}
          </span>
          <button class="nav-btn" (click)="nextMonth()">›</button>
        </div>
      </div>

      <div class="calendar-weekdays">
        <div>Pn</div>
        <div>Wt</div>
        <div>Śr</div>
        <div>Cz</div>
        <div>Pt</div>
        <div>Sb</div>
        <div>Nd</div>
      </div>

      <div class="calendar-grid">
        <div
          *ngFor="let day of calendarDays"
          class="calendar-day"
          [class.inactive]="day.isInactive"
          [class.active]="!day.isInactive"
          [class.today]="day.isToday"
          [class.completed]="day.isCompleted"
        >
          {{ day.day }}

          <div class="goal-indicators" *ngIf="day.indicators && day.indicators.length > 0">
            <span
              class="indicator"
              *ngFor="let indicator of day.indicators"
              [class.steps]="indicator === 'steps'"
              [class.fire]="indicator === 'fire'"
              [class.sleep]="indicator === 'sleep'"
            >
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Wykresy -->
  <div class="chart-section">
    <div class="chart-header">
      <div class="chart-title">Dzisiejsza aktywność</div>
    </div>

    <div class="chart-wrapper">
      <div class="chart-icons">
        <!-- Kroki -->
        <button
          class="chart-icon-btn steps-btn"
          [class.active]="currentChartType === 'steps'"
          (click)="changeChart('steps')"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 90">
            <path
              d="M 82.73 85.896 H 56.693 c -6.108 0 -11.892 -2.336 -16.286 -6.579 L 4.769 44.908 C 1.717 41.961 0.024 38.003 0 33.762 c -0.023 -4.241 1.625 -8.218 4.643 -11.198 L 20.134 7.269 c 4.255 -4.201 10.974 -4.256 15.296 -0.12 c 0.407 0.389 0.631 0.932 0.617 1.496 c -0.102 4.007 1.246 7.277 3.896 9.458 c 3.563 2.931 9.203 3.81 15.468 2.41 c 1.6 -0.356 3.245 0.028 4.522 1.053 c 1.288 1.032 2.026 2.57 2.026 4.219 v 19.671 c 0 3.866 3.145 7.011 7.011 7.011 h 2.821 C 81.832 52.466 90 60.634 90 70.673 v 7.954 C 90 82.636 86.739 85.896 82.73 85.896 z M 27.844 8.089 c -1.767 0 -3.533 0.676 -4.899 2.025 L 7.454 25.411 C 5.209 27.627 3.982 30.585 4 33.74 c 0.018 3.155 1.277 6.099 3.547 8.29 L 43.186 76.44 c 3.645 3.519 8.441 5.456 13.508 5.456 H 82.73 c 1.803 0 3.27 -1.467 3.27 -3.27 v -7.954 c 0 -7.834 -6.373 -14.207 -14.207 -14.207 h -2.821 c -6.071 0 -11.011 -4.939 -11.011 -11.011 V 25.783 c 0 -0.429 -0.192 -0.829 -0.527 -1.098 c -0.192 -0.154 -0.596 -0.391 -1.15 -0.27 c -7.476 1.669 -14.36 0.493 -18.88 -3.225 c -3.412 -2.807 -5.253 -6.831 -5.356 -11.681 C 30.8 8.563 29.321 8.089 27.844 8.089 z"
              fill="#10b981"
            />
            <path
              d="M 88 72.673 H 57.118 c -3.696 0 -7.198 -1.412 -9.861 -3.977 L 3.581 26.633 c -0.796 -0.766 -0.819 -2.032 -0.053 -2.828 c 0.767 -0.796 2.032 -0.82 2.828 -0.053 l 43.677 42.063 c 1.913 1.843 4.43 2.857 7.086 2.857 H 88 c 1.104 0 2 0.896 2 2 S 89.104 72.673 88 72.673 z"
              fill="#10b981"
            />
          </svg>
        </button>

        <!-- Płomień -->
        <button
          class="chart-icon-btn fire-btn"
          [class.active]="currentChartType === 'fire'"
          (click)="changeChart('fire')"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
            <path d="M12 2c2 4 6 6 6 11a6 6 0 1 1-12 0c0-3 2-5 4-7" />
            <path d="M12 12c1 2 3 3 3 5a3 3 0 1 1-6 0c0-1 1-2 2-3" />
          </svg>
        </button>

        <!-- Księżyc -->
        <button
          class="chart-icon-btn sleep-btn"
          [class.active]="currentChartType === 'sleep'"
          (click)="changeChart('sleep')"
        >
          <svg viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </button>
      </div>

      <div class="chart-with-axis">
        <div class="chart-container">
          <div class="y-axis">
            <span *ngFor="let value of getYAxisLabels()">
              {{ formatYAxisLabel(value) }}
            </span>
          </div>
          <div
            *ngFor="let value of currentChartData; let i = index"
            class="chart-bar"
            [style.height.%]="value"
            [style.background]="getChartBarColor()"
            [title]="i + ':00 - ' + value + '%'"
          ></div>
        </div>
        <div class="chart-labels">
          <span *ngFor="let hour of hours"> {{ hour }}:00 </span>
        </div>
      </div>
    </div>
  </div>
</div>
